<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ollama Local Models</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
        <div class="container mx-auto p-8">
            <h1 class="text-3xl font-bold mb-4">Downloaded Ollama Models</h1>
            <div
                id="models-container"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
            >
                <!-- Models will be inserted here by JavaScript -->
            </div>
            <div id="error-message" class="mt-4 text-red-500"></div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const modelsContainer =
                    document.getElementById("models-container");
                const errorMessage = document.getElementById("error-message");

                fetch("http://localhost:11434/api/tags")
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error(
                                "Ollama API is not reachable. Make sure Ollama is running."
                            );
                        }
                        return response.json();
                    })
                    .then((data) => {
                        if (data.models && data.models.length > 0) {
                            data.models.forEach((model) => {
                                const card = document.createElement("div");
                                card.className =
                                    "bg-white dark:bg-gray-800 rounded-lg shadow-md p-6";

                                const modelName = document.createElement("h2");
                                modelName.className =
                                    "text-xl font-semibold mb-2";
                                modelName.textContent = model.name;

                                const modelDetails =
                                    document.createElement("p");
                                modelDetails.className =
                                    "text-gray-600 dark:text-gray-400";
                                modelDetails.textContent = `Size: ${Math.round(
                                    model.size / 1e9
                                )} GB`;

                                card.appendChild(modelName);
                                card.appendChild(modelDetails);
                                modelsContainer.appendChild(card);
                            });
                        } else {
                            modelsContainer.innerHTML =
                                "<p>No downloaded models found.</p>";
                        }
                    })
                    .catch((error) => {
                        console.error("Error fetching models:", error);
                        errorMessage.textContent =
                            "Error fetching models: " + error.message;
                    });
            });
        </script>
    </body>
</html>
