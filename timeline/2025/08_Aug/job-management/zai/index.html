<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AI CV & Motivation Generator</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

            * {
                font-family: "Inter", sans-serif;
            }

            .gradient-bg {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }

            .glass-effect {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .hover-lift {
                transition: all 0.3s ease;
            }

            .hover-lift:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            .pulse-animation {
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
                100% {
                    opacity: 1;
                }
            }

            .slide-in {
                animation: slideIn 0.3s ease-out;
            }

            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            .fade-in {
                animation: fadeIn 0.5s ease-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            .context-menu {
                position: absolute;
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                min-width: 200px;
                display: none;
            }

            .context-menu-item {
                padding: 10px 15px;
                cursor: pointer;
                transition: background 0.2s;
                display: flex;
                align-items: center;
            }

            .context-menu-item:hover {
                background: #f3f4f6;
            }

            .context-menu-item:first-child {
                border-radius: 8px 8px 0 0;
            }

            .context-menu-item:last-child {
                border-radius: 0 0 8px 8px;
            }

            .progress-bar {
                height: 6px;
                background: #e5e7eb;
                border-radius: 3px;
                overflow: hidden;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea, #764ba2);
                border-radius: 3px;
                transition: width 0.3s ease;
            }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Header -->
        <header class="gradient-bg text-white shadow-lg">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-brain text-3xl"></i>
                        <h1 class="text-2xl font-bold">AI CV Generator</h1>
                    </div>
                    <nav class="flex items-center space-x-6">
                        <button
                            class="hover:text-purple-200 transition"
                            onclick="showSection('jobs')"
                        >
                            <i class="fas fa-briefcase mr-2"></i>Jobs
                        </button>
                        <button
                            class="hover:text-purple-200 transition"
                            onclick="showSection('processes')"
                        >
                            <i class="fas fa-tasks mr-2"></i>Processes
                        </button>
                        <button
                            class="hover:text-purple-200 transition"
                            onclick="showSection('results')"
                        >
                            <i class="fas fa-file-alt mr-2"></i>Results
                        </button>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-6 py-8">
            <!-- Jobs Section -->
            <section id="jobs-section" class="fade-in">
                <div
                    class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"
                >
                    <h2 class="text-3xl font-bold text-gray-800">
                        Job Listings
                    </h2>
                    <div
                        class="flex flex-col sm:flex-row gap-3 w-full md:w-auto"
                    >
                        <div class="relative">
                            <input
                                type="text"
                                id="job-search"
                                placeholder="Search jobs..."
                                class="w-full sm:w-64 px-4 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                            />
                            <i
                                class="fas fa-search absolute left-3 top-3 text-gray-400"
                            ></i>
                        </div>
                        <select
                            id="job-sort"
                            class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                        >
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="title-asc">Title (A-Z)</option>
                            <option value="title-desc">Title (Z-A)</option>
                        </select>
                        <button
                            onclick="openAddJobModal()"
                            class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition hover-lift whitespace-nowrap"
                        >
                            <i class="fas fa-plus mr-2"></i>Add Job
                        </button>
                    </div>
                </div>

                <!-- Job List -->
                <div
                    id="job-list"
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                >
                    <!-- Jobs will be dynamically added here -->
                </div>
            </section>

            <!-- Processes Section -->
            <section id="processes-section" class="hidden fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">
                    Running Processes
                </h2>
                <div id="process-list" class="space-y-4">
                    <!-- Processes will be dynamically added here -->
                </div>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="hidden fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">
                    Generated Results
                </h2>
                <div id="results-list" class="space-y-6">
                    <!-- Results will be dynamically added here -->
                </div>
            </section>
        </main>

        <!-- Context Menu -->
        <div id="context-menu" class="context-menu">
            <!-- Context menu items will be dynamically added here -->
        </div>

        <!-- Add Job Modal -->
        <div
            id="add-job-modal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50"
        >
            <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 slide-in">
                <h3 class="text-2xl font-bold mb-6">Add New Job</h3>
                <form onsubmit="addJob(event)">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >Job Title</label
                        >
                        <input
                            type="text"
                            id="job-title"
                            required
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                        />
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >Description</label
                        >
                        <textarea
                            id="job-description"
                            required
                            rows="4"
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                        ></textarea>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >Job Link (Optional)</label
                        >
                        <input
                            type="url"
                            id="job-link"
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                        />
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button
                            type="button"
                            onclick="closeAddJobModal()"
                            class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition"
                        >
                            Cancel
                        </button>
                        <button
                            type="submit"
                            class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
                        >
                            Save Job
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Job Details Modal -->
        <div
            id="job-details-modal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50"
        >
            <div
                class="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto slide-in"
            >
                <div class="flex justify-between items-start mb-6">
                    <h3 id="job-details-title" class="text-2xl font-bold"></h3>
                    <button
                        onclick="closeJobDetailsModal()"
                        class="text-gray-500 hover:text-gray-700"
                    >
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="job-details-content" class="mb-6">
                    <!-- Job details will be dynamically added here -->
                </div>
                <div class="flex flex-wrap gap-3">
                    <button
                        onclick="openGenerateModal('cv')"
                        class="flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition hover-lift"
                    >
                        <i class="fas fa-file-pdf mr-2"></i>Generate CV
                    </button>
                    <button
                        onclick="openGenerateModal('motivation')"
                        class="flex-1 bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition hover-lift"
                    >
                        <i class="fas fa-heart mr-2"></i>Generate Motivation
                    </button>
                    <button
                        onclick="openGenerateModal('summary')"
                        class="flex-1 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition hover-lift"
                    >
                        <i class="fas fa-list mr-2"></i>Generate Summary
                    </button>
                </div>
            </div>
        </div>

        <!-- Generate Modal -->
        <div
            id="generate-modal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50"
        >
            <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 slide-in">
                <h3 id="generate-title" class="text-2xl font-bold mb-6"></h3>
                <form onsubmit="startGeneration(event)">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >AI Model</label
                        >
                        <select
                            id="ai-model"
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                        >
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5">GPT-3.5</option>
                            <option value="claude">Claude</option>
                            <option value="gemini">Gemini</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >Temperature</label
                        >
                        <input
                            type="range"
                            id="temperature"
                            min="0"
                            max="1"
                            step="0.1"
                            value="0.7"
                            class="w-full"
                        />
                        <div class="flex justify-between text-sm text-gray-600">
                            <span>0 (Conservative)</span>
                            <span id="temp-value">0.7</span>
                            <span>1 (Creative)</span>
                        </div>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 font-semibold mb-2"
                            >Custom Prompt</label
                        >
                        <textarea
                            id="custom-prompt"
                            rows="3"
                            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"
                            placeholder="Enter your custom prompt..."
                        ></textarea>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button
                            type="button"
                            onclick="closeGenerateModal()"
                            class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition"
                        >
                            Cancel
                        </button>
                        <button
                            type="submit"
                            class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
                        >
                            Start Generation
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Result View Modal -->
        <div
            id="result-modal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50"
        >
            <div
                class="bg-white rounded-xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto slide-in"
            >
                <div class="flex justify-between items-start mb-6">
                    <h3 id="result-title" class="text-2xl font-bold"></h3>
                    <button
                        onclick="closeResultModal()"
                        class="text-gray-500 hover:text-gray-700"
                    >
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="result-content" class="prose max-w-none">
                    <!-- Result content will be dynamically added here -->
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button
                        onclick="copyResult()"
                        class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition"
                    >
                        <i class="fas fa-copy mr-2"></i>Copy
                    </button>
                    <button
                        onclick="downloadResult()"
                        class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
                    >
                        <i class="fas fa-download mr-2"></i>Download
                    </button>
                </div>
            </div>
        </div>

        <script>
            // Dummy data
            let jobs = [
                {
                    id: 1,
                    title: "Senior Frontend Developer",
                    description:
                        "We are looking for an experienced frontend developer with expertise in React, TypeScript, and modern web technologies. The ideal candidate will have 5+ years of experience and a passion for creating beautiful, performant user interfaces.",
                    link: "https://example.com/job1",
                    createdAt: new Date().toISOString(),
                },
                {
                    id: 2,
                    title: "Full Stack Engineer",
                    description:
                        "Join our team as a full stack engineer working with Node.js, Python, and cloud technologies. You'll be responsible for building scalable web applications and working with cross-functional teams.",
                    link: "https://example.com/job2",
                    createdAt: new Date().toISOString(),
                },
                {
                    id: 3,
                    title: "UX/UI Designer",
                    description:
                        "Seeking a creative UX/UI designer to join our product team. You'll be responsible for creating intuitive and engaging user experiences across our digital products.",
                    link: "https://example.com/job3",
                    createdAt: new Date(Date.now() - 86400000).toISOString(), // Yesterday
                },
            ];

            let processes = [];
            let results = [];
            let currentJob = null;
            let currentGenerateType = null;
            let contextMenuJob = null;

            // Initialize
            document.addEventListener("DOMContentLoaded", () => {
                renderJobs();

                // Temperature slider
                document
                    .getElementById("temperature")
                    .addEventListener("input", (e) => {
                        document.getElementById("temp-value").textContent =
                            e.target.value;
                    });

                // Search functionality
                document
                    .getElementById("job-search")
                    .addEventListener("input", (e) => {
                        renderJobs(e.target.value);
                    });

                // Sort functionality
                document
                    .getElementById("job-sort")
                    .addEventListener("change", (e) => {
                        renderJobs(
                            document.getElementById("job-search").value,
                            e.target.value
                        );
                    });

                // Hide context menu on click outside
                document.addEventListener("click", () => {
                    document.getElementById("context-menu").style.display =
                        "none";
                });
            });

            // Section navigation
            function showSection(section) {
                document
                    .querySelectorAll("section")
                    .forEach((s) => s.classList.add("hidden"));
                document
                    .getElementById(`${section}-section`)
                    .classList.remove("hidden");

                if (section === "processes") {
                    renderProcesses();
                } else if (section === "results") {
                    renderResults();
                }
            }

            // Job management
            function renderJobs(searchTerm = "", sortBy = "newest") {
                let filteredJobs = [...jobs];

                // Apply search filter
                if (searchTerm) {
                    const term = searchTerm.toLowerCase();
                    filteredJobs = filteredJobs.filter(
                        (job) =>
                            job.title.toLowerCase().includes(term) ||
                            job.description.toLowerCase().includes(term)
                    );
                }

                // Apply sorting
                switch (sortBy) {
                    case "oldest":
                        filteredJobs.sort(
                            (a, b) =>
                                new Date(a.createdAt) - new Date(b.createdAt)
                        );
                        break;
                    case "title-asc":
                        filteredJobs.sort((a, b) =>
                            a.title.localeCompare(b.title)
                        );
                        break;
                    case "title-desc":
                        filteredJobs.sort((a, b) =>
                            b.title.localeCompare(a.title)
                        );
                        break;
                    case "newest":
                    default:
                        filteredJobs.sort(
                            (a, b) =>
                                new Date(b.createdAt) - new Date(a.createdAt)
                        );
                }

                const jobList = document.getElementById("job-list");
                jobList.innerHTML = filteredJobs
                    .map(
                        (job) => `
                <div class="bg-white rounded-xl shadow-md p-6 hover-lift cursor-pointer relative" 
                     onclick="openJobDetails(${job.id})"
                     oncontextmenu="showContextMenu(event, ${
                         job.id
                     }); return false;">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-semibold text-gray-800">${
                            job.title
                        }</h3>
                        <button onclick="deleteJob(event, ${
                            job.id
                        })" class="text-red-500 hover:text-red-700 z-10">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <p class="text-gray-600 mb-4 line-clamp-3">${
                        job.description
                    }</p>
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-calendar mr-2"></i>
                        ${new Date(job.createdAt).toLocaleDateString()}
                    </div>
                </div>
            `
                    )
                    .join("");
            }

            function openAddJobModal() {
                document
                    .getElementById("add-job-modal")
                    .classList.remove("hidden");
            }

            function closeAddJobModal() {
                document
                    .getElementById("add-job-modal")
                    .classList.add("hidden");
                document.getElementById("job-title").value = "";
                document.getElementById("job-description").value = "";
                document.getElementById("job-link").value = "";
            }

            function addJob(event) {
                event.preventDefault();
                const newJob = {
                    id: Date.now(),
                    title: document.getElementById("job-title").value,
                    description:
                        document.getElementById("job-description").value,
                    link: document.getElementById("job-link").value,
                    createdAt: new Date().toISOString(),
                };
                jobs.push(newJob);
                renderJobs();
                closeAddJobModal();
            }

            function deleteJob(event, jobId) {
                event.stopPropagation();
                jobs = jobs.filter((job) => job.id !== jobId);
                renderJobs();
            }

            function openJobDetails(jobId) {
                currentJob = jobs.find((job) => job.id === jobId);
                if (!currentJob) return;

                document.getElementById("job-details-title").textContent =
                    currentJob.title;
                document.getElementById("job-details-content").innerHTML = `
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-2">Description</h4>
                        <p class="text-gray-600">${currentJob.description}</p>
                    </div>
                    ${
                        currentJob.link
                            ? `
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">Job Link</h4>
                            <a href="${currentJob.link}" target="_blank" class="text-purple-600 hover:underline">
                                <i class="fas fa-external-link-alt mr-2"></i>View Job
                            </a>
                        </div>
                    `
                            : ""
                    }
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-2">Created</h4>
                        <p class="text-gray-600">${new Date(
                            currentJob.createdAt
                        ).toLocaleString()}</p>
                    </div>
                </div>
            `;
                document
                    .getElementById("job-details-modal")
                    .classList.remove("hidden");
            }

            function closeJobDetailsModal() {
                document
                    .getElementById("job-details-modal")
                    .classList.add("hidden");
                currentJob = null;
            }

            // Context menu
            function showContextMenu(event, jobId) {
                event.preventDefault();
                event.stopPropagation();

                contextMenuJob = jobs.find((job) => job.id === jobId);
                if (!contextMenuJob) return;

                const contextMenu = document.getElementById("context-menu");

                // Check if results exist for this job
                const jobResults = results.filter((r) => r.jobId === jobId);
                const hasSummary = jobResults.some((r) => r.type === "summary");
                const hasCV = jobResults.some((r) => r.type === "cv");
                const hasMotivation = jobResults.some(
                    (r) => r.type === "motivation"
                );

                contextMenu.innerHTML = `
                <div class="context-menu-item" onclick="handleContextMenuAction('summary', ${hasSummary})">
                    <i class="fas fa-list mr-3 ${
                        hasSummary ? "text-green-600" : "text-purple-600"
                    }"></i>
                    ${hasSummary ? "View Summary" : "Generate Summary"}
                </div>
                <div class="context-menu-item" onclick="handleContextMenuAction('cv', ${hasCV})">
                    <i class="fas fa-file-pdf mr-3 ${
                        hasCV ? "text-green-600" : "text-blue-600"
                    }"></i>
                    ${hasCV ? "View CV" : "Generate CV"}
                </div>
                <div class="context-menu-item" onclick="handleContextMenuAction('motivation', ${hasMotivation})">
                    <i class="fas fa-heart mr-3 ${
                        hasMotivation ? "text-green-600" : "text-red-600"
                    }"></i>
                    ${hasMotivation ? "View Motivation" : "Generate Motivation"}
                </div>
                <div class="context-menu-item" onclick="openJobDetails(${jobId})">
                    <i class="fas fa-info-circle mr-3 text-gray-600"></i>
                    Job Details
                </div>
            `;

                // Position the context menu
                contextMenu.style.display = "block";
                contextMenu.style.left = `${event.pageX}px`;
                contextMenu.style.top = `${event.pageY}px`;

                // Adjust if menu goes off screen
                const rect = contextMenu.getBoundingClientRect();
                if (rect.right > window.innerWidth) {
                    contextMenu.style.left = `${event.pageX - rect.width}px`;
                }
                if (rect.bottom > window.innerHeight) {
                    contextMenu.style.top = `${event.pageY - rect.height}px`;
                }
            }

            function handleContextMenuAction(type, hasResult) {
                document.getElementById("context-menu").style.display = "none";

                if (hasResult) {
                    // View existing result
                    const result = results.find(
                        (r) => r.jobId === contextMenuJob.id && r.type === type
                    );
                    if (result) {
                        viewResult(result.id);
                    }
                } else {
                    // Generate new result
                    currentJob = contextMenuJob;
                    openGenerateModal(type);
                }
            }

            // Generation
            function openGenerateModal(type) {
                currentGenerateType = type;
                const titles = {
                    cv: "Generate CV",
                    motivation: "Generate Motivation Letter",
                    summary: "Generate Job Summary",
                };
                document.getElementById("generate-title").textContent =
                    titles[type];
                document
                    .getElementById("generate-modal")
                    .classList.remove("hidden");
            }

            function closeGenerateModal() {
                document
                    .getElementById("generate-modal")
                    .classList.add("hidden");
                currentGenerateType = null;
            }

            function startGeneration(event) {
                event.preventDefault();

                const process = {
                    id: Date.now(),
                    type: currentGenerateType,
                    jobId: currentJob.id,
                    jobTitle: currentJob.title,
                    status: "running",
                    progress: 0,
                    model: document.getElementById("ai-model").value,
                    temperature: document.getElementById("temperature").value,
                    prompt: document.getElementById("custom-prompt").value,
                    startTime: new Date().toISOString(),
                    estimatedTime: Math.floor(Math.random() * 20) + 10, // 10-30 seconds
                };

                processes.push(process);
                closeGenerateModal();
                closeJobDetailsModal();
                showSection("processes");
                renderProcesses();

                // Simulate progress
                simulateProgress(process.id);
            }

            function renderProcesses() {
                const processList = document.getElementById("process-list");

                if (processes.length === 0) {
                    processList.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-tasks text-5xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">No running processes</p>
                    </div>
                `;
                    return;
                }

                processList.innerHTML = processes
                    .map((process) => {
                        const elapsed = Math.floor(
                            (new Date() - new Date(process.startTime)) / 1000
                        );
                        const remaining = Math.max(
                            0,
                            process.estimatedTime - elapsed
                        );

                        return `
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800">${
                                    process.type.charAt(0).toUpperCase() +
                                    process.type.slice(1)
                                } for ${process.jobTitle}</h4>
                                <p class="text-sm text-gray-600">Model: ${
                                    process.model
                                } | Temperature: ${process.temperature}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                ${
                                    process.status === "running"
                                        ? `
                                    <div class="pulse-animation">
                                        <i class="fas fa-spinner fa-spin text-purple-600"></i>
                                    </div>
                                `
                                        : `
                                    <i class="fas fa-check-circle text-green-600"></i>
                                `
                                }
                                <span class="text-sm font-medium ${
                                    process.status === "running"
                                        ? "text-purple-600"
                                        : "text-green-600"
                                }">
                                    ${
                                        process.status === "running"
                                            ? `Processing (${remaining}s remaining)`
                                            : "Completed"
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="progress-bar mb-2">
                            <div class="progress-fill" style="width: ${
                                process.progress
                            }%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600">
                            <span>Started: ${new Date(
                                process.startTime
                            ).toLocaleTimeString()}</span>
                            <span>${process.progress}%</span>
                        </div>
                    </div>
                `;
                    })
                    .join("");
            }

            function simulateProgress(processId) {
                const process = processes.find((p) => p.id === processId);
                if (!process) return;

                const interval = setInterval(() => {
                    const elapsed = Math.floor(
                        (new Date() - new Date(process.startTime)) / 1000
                    );
                    const progress = Math.min(
                        100,
                        Math.floor((elapsed / process.estimatedTime) * 100)
                    );

                    process.progress = progress;

                    if (progress >= 100) {
                        process.status = "completed";
                        clearInterval(interval);

                        // Generate result
                        const result = {
                            id: Date.now(),
                            jobId: process.jobId,
                            type: process.type,
                            jobTitle: process.jobTitle,
                            content: generateDummyContent(
                                process.type,
                                process.jobTitle
                            ),
                            createdAt: new Date().toISOString(),
                        };
                        results.push(result);

                        // Remove completed process after a delay
                        setTimeout(() => {
                            processes = processes.filter(
                                (p) => p.id !== processId
                            );
                            renderProcesses();
                        }, 3000);
                    }

                    renderProcesses();
                }, 500);
            }

            function generateDummyContent(type, jobTitle) {
                const templates = {
                    cv: `
                    <h2>Curriculum Vitae</h2>
                    <h3>Professional Summary</h3>
                    <p>Experienced professional with a proven track record in ${jobTitle.toLowerCase()}. Passionate about delivering exceptional results and driving innovation in the field.</p>
                    
                    <h3>Experience</h3>
                    <ul>
                        <li><strong>Senior Position</strong> - Tech Company (2020-Present)</li>
                        <li><strong>Mid-Level Position</strong> - Startup (2018-2020)</li>
                        <li><strong>Junior Position</strong> - Corporation (2016-2018)</li>
                    </ul>
                    
                    <h3>Skills</h3>
                    <p>Technical expertise in relevant technologies, strong problem-solving abilities, excellent communication skills, and team collaboration.</p>
                `,
                    motivation: `
                    <h2>Motivation Letter</h2>
                    <p>Dear Hiring Manager,</p>
                    <p>I am writing to express my enthusiastic interest in the ${jobTitle} position at your esteemed organization. With my extensive experience and passion for this field, I am confident in my ability to contribute significantly to your team.</p>
                    
                    <p>Throughout my career, I have developed a strong foundation in the skills and knowledge required for this role. My approach combines technical expertise with creative problem-solving, allowing me to tackle challenges effectively and deliver outstanding results.</p>
                    
                    <p>I am particularly drawn to this opportunity because of your company's commitment to innovation and excellence. I believe my values align perfectly with your organizational culture, and I am eager to bring my unique perspective and skills to your team.</p>
                    
                    <p>Thank you for considering my application. I look forward to the opportunity to discuss how I can contribute to your organization's success.</p>
                    
                    <p>Sincerely,<br>Your Name</p>
                `,
                    summary: `
                    <h2>Job Summary</h2>
                    <h3>Position: ${jobTitle}</h3>
                    <p><strong>Key Responsibilities:</strong></p>
                    <ul>
                        <li>Lead and manage projects related to the core business functions</li>
                        <li>Collaborate with cross-functional teams to achieve organizational goals</li>
                        <li>Implement best practices and innovative solutions</li>
                        <li>Maintain high standards of quality and performance</li>
                    </ul>
                    
                    <p><strong>Required Qualifications:</strong></p>
                    <ul>
                        <li>Relevant degree or equivalent experience</li>
                        <li>Strong technical and soft skills</li>
                        <li>Proven track record of success</li>
                        <li>Excellent communication and leadership abilities</li>
                    </ul>
                    
                    <p><strong>What We Offer:</strong></p>
                    <ul>
                        <li>Competitive compensation and benefits</li>
                        <li>Professional development opportunities</li>
                        <li>Collaborative and innovative work environment</li>
                        <li>Work-life balance and flexibility</li>
                    </ul>
                `,
                };
                return templates[type] || "<p>Content not available</p>";
            }

            function renderResults() {
                const resultsList = document.getElementById("results-list");

                if (results.length === 0) {
                    resultsList.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-file-alt text-5xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">No results yet. Generate some CVs, motivation letters, or summaries!</p>
                    </div>
                `;
                    return;
                }

                resultsList.innerHTML = results
                    .map(
                        (result) => `
                <div class="bg-white rounded-xl shadow-md p-6 hover-lift cursor-pointer" onclick="viewResult(${
                    result.id
                })">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800">${
                                result.type.charAt(0).toUpperCase() +
                                result.type.slice(1)
                            } - ${result.jobTitle}</h3>
                            <p class="text-sm text-gray-600">Generated: ${new Date(
                                result.createdAt
                            ).toLocaleString()}</p>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="copyResult(event, ${
                                result.id
                            })" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button onclick="downloadResult(event, ${
                                result.id
                            })" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-gray-600 line-clamp-3">
                        ${result.content
                            .replace(/<[^>]*>/g, "")
                            .substring(0, 150)}...
                    </div>
                </div>
            `
                    )
                    .join("");
            }

            function viewResult(resultId) {
                const result = results.find((r) => r.id === resultId);
                if (!result) return;

                document.getElementById("result-title").textContent = `${
                    result.type.charAt(0).toUpperCase() + result.type.slice(1)
                } - ${result.jobTitle}`;
                document.getElementById("result-content").innerHTML =
                    result.content;
                document
                    .getElementById("result-modal")
                    .classList.remove("hidden");
            }

            function closeResultModal() {
                document.getElementById("result-modal").classList.add("hidden");
            }

            function copyResult(event, resultId) {
                if (event) event.stopPropagation();
                const result = results.find((r) => r.id === resultId);
                if (!result) return;

                const textContent = result.content
                    .replace(/<[^>]*>/g, "\n")
                    .replace(/\n\s*\n/g, "\n");
                navigator.clipboard.writeText(textContent).then(() => {
                    // Show notification instead of alert
                    showNotification("Content copied to clipboard!");
                });
            }

            function downloadResult(event, resultId) {
                if (event) event.stopPropagation();
                const result = results.find((r) => r.id === resultId);
                if (!result) return;

                const blob = new Blob([result.content], { type: "text/html" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = `${result.type}_${result.jobTitle.replace(
                    /\s+/g,
                    "_"
                )}.html`;
                a.click();
                URL.revokeObjectURL(url);

                showNotification("Download started!");
            }

            function showNotification(message) {
                const notification = document.createElement("div");
                notification.className =
                    "fixed bottom-4 right-4 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in";
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.opacity = "0";
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
        </script>
    </body>
</html>
